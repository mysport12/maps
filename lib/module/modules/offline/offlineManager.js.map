{"version":3,"names":["NativeModules","NativeEventEmitter","isUndefined","isFunction","isAndroid","default","OfflineCreatePackOptions","OfflinePack","RNMBXModule","MapboxOfflineManager","RNMBXOfflineModule","OfflineModuleEventEmitter","OfflineManager","constructor","_hasInitialized","_offlinePacks","_progressListeners","_errorListeners","_onProgress","bind","_onError","subscriptionProgress","subscriptionError","createPack","options","progressListener","errorListener","_initialize","packOptions","name","Error","subscribe","nativeOfflinePack","createPackLegacy","invalidatePack","offlinePack","deletePack","deletePackLegacy","invalidateAmbientCache","MapboxV10","console","warn","clearAmbientCache","migrateOfflineCache","setMaximumAmbientCacheSize","size","resetDatabase","getPacks","Object","keys","map","getPacksLegacy","packs","metadata","JSON","parse","getPack","mergeOfflineRegions","path","setTileCountLimit","limit","setTileCountLimitLegacy","setProgressEventThrottle","throttleValue","packName","totalProgressListeners","length","addListener","OfflineCallbackName","Progress","totalErrorListeners","setPackObserver","e","log","unsubscribe","remove","forceInit","nativeOfflinePacks","state","payload","_hasListeners","pack","OfflinePackDownloadState","Complete","listenerMap","offlineManager"],"sourceRoot":"../../../../src","sources":["modules/offline/offlineManager.ts"],"mappings":"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"}
