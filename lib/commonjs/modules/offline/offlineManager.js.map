{"version":3,"names":["RNMBXModule","NativeModules","MapboxOfflineManager","RNMBXOfflineModule","OfflineModuleEventEmitter","NativeEventEmitter","OfflineManager","constructor","_hasInitialized","_offlinePacks","_progressListeners","_errorListeners","_onProgress","bind","_onError","subscriptionProgress","subscriptionError","createPack","options","progressListener","errorListener","_initialize","packOptions","OfflineCreatePackOptions","name","Error","subscribe","nativeOfflinePack","OfflinePack","createPackLegacy","invalidatePack","offlinePack","deletePack","deletePackLegacy","invalidateAmbientCache","MapboxV10","console","warn","clearAmbientCache","migrateOfflineCache","setMaximumAmbientCacheSize","size","resetDatabase","getPacks","Object","keys","map","getPacksLegacy","packs","metadata","JSON","parse","getPack","mergeOfflineRegions","path","setTileCountLimit","limit","setTileCountLimitLegacy","setProgressEventThrottle","throttleValue","packName","totalProgressListeners","length","isFunction","addListener","OfflineCallbackName","Progress","totalErrorListeners","isAndroid","setPackObserver","e","log","unsubscribe","remove","forceInit","nativeOfflinePacks","state","payload","_hasListeners","pack","OfflinePackDownloadState","Complete","listenerMap","isUndefined","offlineManager"],"sourceRoot":"../../../../src","sources":["modules/offline/offlineManager.ts"],"mappings":"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"}
